@model Twitter.Web.Models.ViewModels.UserProfileViewModel

<div class="row">
    <div class="col-xs-9">
        @{
            var username = Model.UserName;
        }

        @Ajax.ActionLink("Tweets", "Tweets", new { username = username },
        new AjaxOptions
        {
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "profile-fillable-area"
        }, htmlAttributes: null) |
        @Ajax.ActionLink("Retweets", "Retweets", new { username = username },
        new AjaxOptions
        {
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "profile-fillable-area"
        }, htmlAttributes: null) |
        @Ajax.ActionLink("Following", "Following", new { username = username },
            new AjaxOptions
            {
                InsertionMode = InsertionMode.Replace,
                UpdateTargetId = "profile-fillable-area"
            }, htmlAttributes: null) |
        @Ajax.ActionLink("Followers", "Followers", new { username = username },
            new AjaxOptions
            {
                InsertionMode = InsertionMode.Replace,
                UpdateTargetId = "profile-fillable-area"
            }, htmlAttributes: null) |
        @Ajax.ActionLink("Favorites", "Favorites", new { username = username },
            new AjaxOptions
            {
                InsertionMode = InsertionMode.Replace,
                UpdateTargetId = "profile-fillable-area"
            }, htmlAttributes: null)
    </div>
    <div class="col-xs-4">
        <div>
            <img class="user-avatar" src="@Url.Content(Model.PictureUrl)" alt="Avatar" />
        </div>

        @if (this.User.Identity.Name != Model.UserName)
        {
            if (Model.Followers.FirstOrDefault(u => u.UserName == this.User.Identity.Name) == null)
            {
                <div class="controls">
                    @Html.ActionLink(linkText: "Follow", actionName: "Follow", controllerName: "Users",
                    routeValues: new { username = username }, htmlAttributes: null)
                </div>
            }
            else
            {
                <div class="controls">
                    @Html.ActionLink(linkText: "Unfollow", actionName: "Unfollow", controllerName: "Users",
                    routeValues: new { username = username }, htmlAttributes: null)
                </div>
            }
        }

        <div>
            <h2>@Model.UserName</h2>

            @if (this.User.Identity.Name == Model.UserName)
            {
                <h4>
                    @Html.ActionLink(
                        linkText: "Edit Profile",
                        actionName: "Index",
                        controllerName: "Manage",
                        routeValues: new { username = username },
                        htmlAttributes: null)
                </h4>
            }
        </div>
    </div>
    <section id="profile-fillable-area">
        <div class="col-xs-6">
            @{
                Html.RenderPartial("~/Views/Tweets/_Tweets.cshtml", Model.Tweets);
            }
        </div>
    </section>
</div>

@section scripts{
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
}
