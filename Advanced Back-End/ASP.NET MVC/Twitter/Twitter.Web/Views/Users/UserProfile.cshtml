@model Twitter.Web.Models.ViewModels.UserProfileViewModel

<div class="row">
    <div class="col-xs-9">
        @{
            var username = Model.UserName.Substring(0, Model.UserName.IndexOf('@'));
        }

        @Ajax.ActionLink("Tweets", "Tweets", new { username = username },
        null, new AjaxOptions { UpdateTargetId = "profile-tweets" }) |
        @Ajax.ActionLink("Retweets", "Retweets", new { username = username },
        null, new AjaxOptions { UpdateTargetId = "profile-tweets" }) |
        @Ajax.ActionLink("Following", "Following", new { username = username },
            null, new AjaxOptions { UpdateTargetId = "profile-following" }) |
        @Ajax.ActionLink("Followers", "Followers", new { username = username },
            null, new AjaxOptions { UpdateTargetId = "profile-followers" }) |
        @Ajax.ActionLink("Favorites", "Favorites", new { username = username },
            null, new AjaxOptions { UpdateTargetId = "profile-favorites" })
    </div>
    <div class="col-xs-4">
        <div>
            <img class="user-avatar" src="@Url.Content(Model.PictureUrl)" alt="Avatar" />
        </div>

        @if (this.User.Identity.Name != Model.UserName)
        {
            if (Model.Followers.FirstOrDefault(u => u.UserName == this.User.Identity.Name) == null)
            {
                <div class="controls">
                    @Html.ActionLink(linkText: "Follow", actionName: "Follow", controllerName: "Users",
                    routeValues: new { username = username }, htmlAttributes: null)
                </div>
            }
        }

        <div>
            <h2>@Model.UserName</h2>

            @if (this.User.Identity.Name == Model.UserName)
            {
                <h4>
                    @Html.ActionLink(
                               linkText: "Edit Profile",
                               actionName: "Index",
                               controllerName: "Manage",
                               routeValues: new { username = username },
                               htmlAttributes: null
                               )
                </h4>
            }

        </div>
    </div>
    <div>
        <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
        @{
            Html.RenderPartial("~/Views/Tweets/_Tweet.cshtml", Model.Tweets);
        }
    </div>
</div>
